# Genetic Counselling Form - Visual Guide

## Form Structure

### Dialog Box
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add New GC / Edit Genetic Counselling          â”‚
â”‚ Create a new genetic counselling record.        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚ [ID]    (hidden if new record)                 â”‚
â”‚                                                  â”‚
â”‚ IDENTIFICATION SECTION                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ Unique ID *            [GC_001           ]   â”‚
â”‚ â”‚ Project ID             [PG251202001      ]   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ DATES & TIMES                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ Counselling Date       [YYYY-MM-DD  --:-- ]  â”‚
â”‚ â”‚ GC Reg Start Time      [YYYY-MM-DD  --:-- ]  â”‚
â”‚ â”‚ GC Reg End Time        [YYYY-MM-DD  --:-- ]  â”‚
â”‚ â”‚ Counseling Start Time  [YYYY-MM-DD  --:-- ]  â”‚
â”‚ â”‚ Counseling End Time    [YYYY-MM-DD  --:-- ]  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ PATIENT INFORMATION                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ Patient/Client Name    [John Doe         ]   â”‚
â”‚ â”‚ Age                    [35               ]   â”‚
â”‚ â”‚ Gender                 [Select â–¼         ]   â”‚
â”‚ â”‚ Email                  [john@email.com   ]   â”‚
â”‚ â”‚ Phone                  [+1 234 567 8900  ]   â”‚
â”‚ â”‚ Address                [123 Main St...   ]   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ GC STAFF                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ GC Staff Name *        [Dr. Smith        ]   â”‚
â”‚ â”‚ Other Members          [Dr. Jones        ]   â”‚
â”‚ â”‚ Clinician/Researcher   [Dr. Brown        ]   â”‚
â”‚ â”‚ Organisation/Hospital  [Medical Center   ]   â”‚
â”‚ â”‚ Speciality             [Genetics         ]   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ COUNSELLING DETAILS                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ Service Name           [Genetic Service  ]   â”‚
â”‚ â”‚ Counselling Type       [Pre-test â–¼      ]   â”‚
â”‚ â”‚ Query/Suspection       [Hereditary...    ]   â”‚
â”‚ â”‚ Budget Opted           [50,000-100,000 â–¼]   â”‚
â”‚ â”‚ Budget Amount          [75,000           ]   â”‚
â”‚ â”‚ Sample Type            [Blood â–¼         ]   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ STATUS & APPROVAL                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ â˜‘ Approval from Head                         â”‚
â”‚ â”‚ â˜ Potential Patient for Future Testing       â”‚
â”‚ â”‚ â˜‘ Extended Family Testing Requirement        â”‚
â”‚ â”‚ Payment Status         [Pending â–¼      ]    â”‚
â”‚ â”‚ Payment Mode           [Card â–¼         ]    â”‚
â”‚ â”‚ Testing Status         [In Progress â–¼  ]    â”‚
â”‚ â”‚ Action Required        [Yes â–¼          ]    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ LINKS & ATTACHMENTS                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ GC Summary Sheet       [http://...       ]   â”‚
â”‚ â”‚ Video Link             [http://...       ]   â”‚
â”‚ â”‚ Audio Link             [http://...       ]   â”‚
â”‚ â”‚ Sales Responsible      [John Smith       ]   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ REMARKS                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ Remark/Comment                               â”‚
â”‚ â”‚ [Patient has family history of...       ]   â”‚
â”‚ â”‚ [genetic disorder. Further testing...   ]   â”‚
â”‚ â”‚ [recommended.                           ]   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Cancel]                        [Add GC]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Form Field Details

### Required Fields (Must Fill)
1. **Unique ID** - Genetic counselling identifier (e.g., "GC_001")
   - Validation: Required, error message if empty
   - Used for: Unique record identification

### Highly Important Fields (Usually Required)
1. **GC Staff Name** - Primary counsellor name
   - Used for: Workflow routing and responsibilities

### Important Fields (Should Fill)
1. **Counselling Type** - Type of counselling session
   - Values: Pre-test, Post-test, etc.
   - Used for: Categorization and reporting

2. **Patient/Client Name** - Full name of patient/client
   - Used for: Identification and communication

### Boolean Checkboxes (Special Handling)
These three fields use controlled components for proper state management:

1. **Approval from Head**
   - Default: Unchecked (false)
   - Stored as: 0 (unchecked) or 1 (checked) in database
   - Type: Boolean checkbox

2. **Potential Patient for Future Testing**
   - Default: Unchecked (false)
   - Stored as: 0 or 1 in database
   - Type: Boolean checkbox

3. **Extended Family Testing Requirement**
   - Default: Unchecked (false)
   - Stored as: 0 or 1 in database
   - Type: Boolean checkbox

### Optional Fields
- Dates (counselling_date, registration times, etc.)
- Contact info (email, phone, address)
- Financial info (payment status, mode, budget)
- Organizational info (hospital, specialty)
- Links (video, audio, summary sheet)
- Any other fields not marked as required

## Form Behavior

### On Open (Add New)
1. Dialog opens with title "Add New GC"
2. All text fields appear empty
3. Boolean checkboxes are unchecked
4. Date fields appear empty
5. Select dropdowns show placeholder
6. `unique_id` field is in focus

### On Edit (Existing Record)
1. Dialog opens with title "Edit Genetic Counselling"
2. All fields populated with existing data
3. ID field hidden (stored internally)
4. Boolean checkboxes checked/unchecked based on data
5. Submit button says "Save Changes"

### On Submit
1. Form validates required fields
2. If valid: Sends to backend via POST/PUT
3. If invalid: Shows error toast for each field
4. Errors appear in browser console with `[GC Form]` prefix

### On Cancel
1. Dialog closes
2. Form resets to empty state
3. Changes discarded

## Field States

### Normal State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Unique ID            â”‚
â”‚ [                 ]  â”‚  (empty or filled)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Error State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Unique ID            â”‚
â”‚ [                 ]  â”‚  (outline turns red)
â”‚ âŒ Unique ID is required
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Checkbox - Unchecked
```
â˜ Approval from Head
```

### Checkbox - Checked
```
â˜‘ Approval from Head
```

## Data Flow

### CREATE (POST) Flow
```
User clicks "+ Add New GC"
         â†“
Form dialog opens (empty fields)
         â†“
User fills unique_id, gc_name, other fields
         â†“
User checks/unchecks checkboxes
         â†“
User clicks "Add GC"
         â†“
Form validates required fields
         â”œâ†’ Invalid: Toast error shown, form stays open
         â””â†’ Valid: Continue...
         â†“
Form converts booleans: trueâ†’1, falseâ†’0
         â†“
Browser logs: [GC Form] Submitting form data: {...}
         â†“
POST request sent to /api/genetic-counselling-sheet
         â†“
Backend processes (boolean conversion, logging, saving)
         â†“
Response received (200 OK)
         â†“
Browser logs: [GC onSave] POST success, result: {id: 7, ...}
         â†“
Dialog closes
         â†“
New record appears in table
```

### UPDATE (PUT) Flow
```
User clicks edit icon on existing record
         â†“
Form dialog opens (fields pre-filled with data)
         â†“
User modifies one or more fields
         â†“
User clicks "Save Changes"
         â†“
Form validates required fields
         â”œâ†’ Invalid: Toast error shown, form stays open
         â””â†’ Valid: Continue...
         â†“
Form converts booleans: trueâ†’1, falseâ†’0
         â†“
Browser logs: [GC Form] Submitting form data: {...}
         â†“
PUT request sent to /api/genetic-counselling-sheet/{id}
         â†“
Backend processes (boolean conversion, timestamp, saving)
         â†“
Response received (200 OK)
         â†“
Browser logs: [GC onSave] PUT success, modified_at: 2025-12-03T...
         â†“
Dialog closes
         â†“
Table updates with new values
```

### Error Flow
```
User clicks "Add GC" without filling unique_id
         â†“
Form validation fails
         â†“
Error callback triggered
         â†“
Browser logs: [GC Form] Validation errors: {unique_id: {...}}
         â†“
Toast appears: "Validation Error: unique_id: Unique ID is required"
         â†“
Form stays open (user can correct)
         â†“
User fills unique_id
         â†“
User clicks "Add GC" again
         â†“
Validation passes, submission proceeds
```

## Console Messages Reference

### Successful POST
```
[GC Form] Submitting form data: {
  unique_id: "GC_001",
  project_id: "PG251202001",
  patient_client_name: "John Doe",
  gc_name: "Dr. Smith",
  approval_from_head: true,
  potential_patient_for_testing_in_future: false,
  extended_family_testing_requirement: true,
  ...
}

[GC onSave] Starting save operation for record: new

[GC onSave] POST response status: 200

[GC onSave] POST success, result: {
  id: 7,
  unique_id: "GC_001",
  gc_name: "Dr. Smith",
  ...
}
```

### Validation Error
```
[GC Form] Validation errors: {
  unique_id: { message: "Unique ID is required" }
}

(Toast appears: "Validation Error: unique_id: Unique ID is required")
```

### Successful PUT
```
[GC Form] Submitting form data: {
  id: 5,
  patient_client_name: "Updated Name",
  ...
}

[GC onSave] Starting save operation for record: 5

[GC onSave] PUT response status: 200

[GC onSave] PUT success, modified_at: "2025-12-03T06:15:00.000Z"
```

## Tips for Using the Form

### âœ… DO
- Fill in `unique_id` first (it's required)
- Fill in `gc_name` for workflow
- Check checkboxes if approval needed
- Monitor browser console for logs
- Close and reopen form if needed

### âŒ DON'T
- Leave `unique_id` empty (will fail validation)
- Use special characters in IDs
- Refresh page immediately after submit (wait for close)
- Ignore error messages (they indicate what's wrong)

### ğŸ” DEBUGGING
- Press F12 to open Developer Tools
- Go to Console tab
- Look for `[GC Form]` and `[GC onSave]` messages
- Check Network tab if request fails
- Look for red error messages

## Form Validation Rules

### `unique_id`
- **Required**: Yes
- **Type**: Text
- **Validation**: Must not be empty
- **Error**: "Unique ID is required"

### Other Fields
- **Required**: No (all optional except unique_id)
- **Type**: Varies (text, number, checkbox, select, date)
- **Validation**: Type checking only
- **Error**: None unless type mismatch

### Boolean Fields (Checkboxes)
- **Default**: Unchecked (false/0)
- **Stored as**: 0 or 1 in database
- **Frontend display**: Checkbox (checked or unchecked)
- **Validation**: None (any boolean state valid)

---

This visual guide should help you understand the form structure, data flow, and how to use it effectively!
